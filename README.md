# Video Downloader

Приложение для скачивания видео и аудио с различных видеохостингов.

## Поддерживаемые сервисы

- YouTube
- VK (ВКонтакте)
- RuTube
- Одноклассники
- Mail.ru
- TikTok
- Instagram/Facebook
- Twitch
- Vimeo
- Telegram
- Dailymotion
- Coub
- Bilibili
- И другие (более 100 сайтов)

## Возможности

- Загрузка видео в различных разрешениях (1080p, 720p, 480p и т.д.)
- Загрузка только аудиодорожки в формате MP3
- Автоматическое определение сервиса по ссылке
- Управление очередью загрузок
- Автоматическое определение доступных разрешений для каждого видео
- Современный двухпанельный интерфейс с темной темой
- Кеширование информации о видео для ускорения работы
- Отслеживание прогресса загрузки
- Возможность отмены текущей загрузки
- Сохранение настроек между запусками
- Удобные иконки и подсказки для кнопок

## Требования

- Python 3.7 или выше
- FFmpeg (для конвертации видео и извлечения аудио)
- PyQt6
- yt-dlp
- QtAwesome (для иконок)

## Установка

1. Клонируйте репозиторий:
```
git clone https://github.com/username/video-downloader.git
cd video-downloader
```

2. Установите необходимые зависимости:
```
pip install -r requirements.txt
```

3. Установите FFmpeg (если не установлен):
   - **Windows**: Скачайте и установите с [официального сайта](https://ffmpeg.org/download.html)
   - **macOS**: `brew install ffmpeg`
   - **Linux**: `sudo apt install ffmpeg` (Ubuntu/Debian) или `sudo dnf install ffmpeg` (Fedora)

4. Запустите приложение:
```
python main.py
```

## Использование

1. Запустите приложение:
```
python main.py
```

2. Вставьте URL видео в поле "URL видео".

3. Нажмите кнопку "Проверить" для получения доступных разрешений видео.

4. Выберите режим загрузки (видео или аудио).

5. Если выбран режим "Видео", выберите желаемое разрешение в выпадающем списке.

6. Нажмите кнопку "Добавить в очередь".

7. Повторите шаги 2-6 для добавления нескольких видео в очередь (опционально).

8. Нажмите кнопку "Загрузить все" для начала загрузки.

9. Следите за прогрессом загрузки и дождитесь завершения.

10. После завершения загрузки вы увидите сводку с результатами.

## Структура проекта

Проект организован согласно принципам SOLID и других хороших практик программирования:

### Основные модули:

- **main.py** - Точка входа в приложение, инициализация и запуск
- **gui_dark.py** - Современный двухпанельный интерфейс с темной темой
- **gui_dark_methods.py** - Методы для класса интерфейса (отделены для улучшения организации кода)
- **downloader.py** - Логика загрузки видео и аудио, управление очередью и кэшем
- **validators.py** - Валидация URL и определение сервиса
- **utils.py** - Вспомогательные утилиты (логирование, работа с файлами, проверка зависимостей)

### Файлы конфигурации и ресурсы:

- **requirements.txt** - Список зависимостей Python
- **url_patterns.json** - Конфигурационный файл с паттернами URL для разных сервисов
- **vid1.png** - Логотип приложения
- **vid1.ico** - Иконка приложения для Windows

### Директории:

- **downloads/** - Папка для сохранения загруженных файлов
- **logs/** - Папка для хранения логов приложения

### Кэш и временные файлы:

- **video_cache.json** - Кэш информации о видео для ускорения работы

### Устаревшие/Альтернативные версии (оставлены для совместимости):

- **gui.py** - Старая версия интерфейса
- **video.py** - Исходный монолитный скрипт до рефакторинга

## Архитектура

Приложение построено по принципу Модель-Представление-Контроллер (MVC):

1. **Модель** (downloader.py, validators.py) - Содержит бизнес-логику, обработку данных и взаимодействие с API видеосервисов
2. **Представление** (gui_dark.py) - Отвечает за пользовательский интерфейс
3. **Контроллер** (gui_dark_methods.py) - Связывает модель и представление, обрабатывает пользовательский ввод

Для обеспечения асинхронной работы используется многопоточность через QThread (для получения информации о видео) и QRunnable (для загрузки файлов).

## Лицензия

MIT License

## Автор

MaksK - контакт: maks_k77@mail.ru 